{{/* OpenClaw Travel Blog - Head Extensions */}}
{{/* PaperMod 테마가 이미 처리하는 항목은 여기서 제외:
     - OG (og:locale, og:type, og:title, og:description, og:image)
     - Twitter Card (twitter:card, twitter:title, twitter:description, twitter:image)
     - Article meta (article:published_time, article:modified_time)
     - Author meta (meta name="author")
     - JSON-LD Article/BlogPosting (PaperMod의 BlogPosting + BreadcrumbList가 더 우수)
     - JSON-LD Organization (PaperMod의 schema_json.html)
     여기서는 PaperMod에 없는 기능만 추가한다. */}}

{{/* Google Analytics GA4 */}}
{{- with site.Config.Services.GoogleAnalytics.ID }}
<script async src="https://www.googletagmanager.com/gtag/js?id={{ . }}"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', '{{ . }}');
</script>
{{- end }}

{{/* 폰트 프리커넥트 (Pretendard) */}}
<link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>

{{/* DNS Prefetch for external resources */}}
<link rel="dns-prefetch" href="https://cdn.jsdelivr.net">

{{/* 테마 컬러 (모바일 브라우저 — 라이트/다크 분리) */}}
<meta name="theme-color" content="#4f46e5" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#3730a3" media="(prefers-color-scheme: dark)">

{{/* 성능: Resource Hints — 다음/이전 포스트 prefetch */}}
{{ if .IsPage }}
{{ with .NextInSection }}<link rel="prefetch" href="{{ .Permalink }}">{{ end }}
{{ with .PrevInSection }}<link rel="prefetch" href="{{ .Permalink }}">{{ end }}
{{ end }}

{{/* JSON-LD: WebSite + SearchAction (홈페이지 전용 — PaperMod에 없음) */}}
{{ if .IsHome }}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebSite",
  "name": "{{ site.Title }}",
  "description": "{{ site.Params.description }}",
  "url": "{{ site.BaseURL }}",
  "potentialAction": {
    "@type": "SearchAction",
    "target": "{{ site.BaseURL }}search/?q={search_term_string}",
    "query-input": "required name=search_term_string"
  }
}
</script>
{{ end }}

{{/* JSON-LD: FAQPage (frontmatter에 faqs 필드가 있으면 자동 생성 — PaperMod에 없음) */}}
{{ if .IsPage }}
{{ with .Params.faqs }}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": [
    {{ range $i, $faq := . }}
    {{ if $i }},{{ end }}
    {
      "@type": "Question",
      "name": {{ $faq.q | jsonify }},
      "acceptedAnswer": {
        "@type": "Answer",
        "text": {{ $faq.a | jsonify }}
      }
    }
    {{ end }}
  ]
}
</script>
{{ end }}
{{ end }}

{{/* JSON-LD: frontmatter schema 배열 렌더링 (AEO가 생성한 Article/TouristAttraction/Event 등) */}}
{{ if .IsPage }}
{{ with .Params.schema }}
{{ range . }}
{{ $schemaType := index . "@type" }}
{{ if and $schemaType (ne $schemaType "FAQPage") }}
<script type="application/ld+json">
{{ . | jsonify (dict "indent" "  ") }}
</script>
{{ end }}
{{ end }}
{{ end }}
{{ end }}

{{/* Meta keywords (PaperMod가 렌더링하지 않음) */}}
{{ if .IsPage }}
{{ with .Params.keywords }}
<meta name="keywords" content="{{ delimit . ", " }}">
{{ end }}
{{ end }}
