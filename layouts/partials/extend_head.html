{{/* OpenClaw Travel Blog - Head Extensions */}}

{{/* Google Analytics GA4 */}}
{{- with site.Config.Services.GoogleAnalytics.ID }}
<script async src="https://www.googletagmanager.com/gtag/js?id={{ . }}"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', '{{ . }}');
</script>
{{- end }}

{{/* 폰트 프리커넥트 (Pretendard) */}}
<link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>

{{/* DNS Prefetch for external resources */}}
<link rel="dns-prefetch" href="https://cdn.jsdelivr.net">

{{/* 테마 컬러 (모바일 브라우저) */}}
<meta name="theme-color" content="#4f46e5" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#3730a3" media="(prefers-color-scheme: dark)">

{{/* Open Graph 추가 */}}
<meta property="og:locale" content="ko_KR">
<meta property="og:type" content="{{ if .IsPage }}article{{ else }}website{{ end }}">

{{/* Twitter Card */}}
<meta name="twitter:card" content="summary_large_image">

{{/* Article specific meta */}}
{{ if .IsPage }}
{{ with .Params.author }}<meta name="author" content="{{ . }}">{{ end }}
{{ with .Date }}<meta property="article:published_time" content="{{ .Format "2006-01-02T15:04:05Z07:00" }}">{{ end }}
{{ with .Lastmod }}<meta property="article:modified_time" content="{{ .Format "2006-01-02T15:04:05Z07:00" }}">{{ end }}
{{ end }}

{{/* 성능: Resource Hints */}}
{{ if .IsPage }}
{{/* 다음/이전 포스트 prefetch */}}
{{ with .NextInSection }}<link rel="prefetch" href="{{ .Permalink }}">{{ end }}
{{ with .PrevInSection }}<link rel="prefetch" href="{{ .Permalink }}">{{ end }}
{{ end }}

{{/* JSON-LD 구조화 데이터 */}}
{{ if .IsPage }}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Article",
  "headline": "{{ .Title }}",
  "description": "{{ with .Description }}{{ . }}{{ else }}{{ .Summary | plainify | truncate 160 }}{{ end }}",
  "datePublished": "{{ .Date.Format "2006-01-02T15:04:05Z07:00" }}",
  "dateModified": "{{ .Lastmod.Format "2006-01-02T15:04:05Z07:00" }}",
  "author": {
    "@type": "Person",
    "name": "{{ with .Params.author }}{{ . }}{{ else }}{{ site.Params.author }}{{ end }}"
  },
  "publisher": {
    "@type": "Organization",
    "name": "{{ site.Title }}",
    "logo": {
      "@type": "ImageObject",
      "url": "{{ site.BaseURL }}favicon.svg"
    }
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "{{ .Permalink }}"
  }
  {{ with .Params.cover.image }},
  "image": "{{ . | absURL }}"
  {{ end }}
}
</script>
{{ else if .IsHome }}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebSite",
  "name": "{{ site.Title }}",
  "description": "{{ site.Params.description }}",
  "url": "{{ site.BaseURL }}",
  "potentialAction": {
    "@type": "SearchAction",
    "target": "{{ site.BaseURL }}search/?q={search_term_string}",
    "query-input": "required name=search_term_string"
  }
}
</script>
{{ end }}

{{/* FAQ Schema (FAQPage) - frontmatter에 faqs 필드가 있으면 자동 생성 */}}
{{ if .IsPage }}
{{ with .Params.faqs }}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": [
    {{ range $i, $faq := . }}
    {{ if $i }},{{ end }}
    {
      "@type": "Question",
      "name": {{ $faq.q | jsonify }},
      "acceptedAnswer": {
        "@type": "Answer",
        "text": {{ $faq.a | jsonify }}
      }
    }
    {{ end }}
  ]
}
</script>
{{ end }}
{{ end }}
